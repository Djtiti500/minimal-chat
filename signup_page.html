<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Signup Page</title>
    <link rel="stylesheet" href="css/register_css_page.css">
</head>
<body>
    <header>
        <div id="navbar"></div>
        <h1 class="title">Sign Up</h1>
    </header>
    <section>
        <div class="registerform">
            <input type="email" placeholder="Email" id="email" name="email" required>
            <input type="password" placeholder="Password" id="password" name="password" required>
            <input type="text" placeholder="Username" id="username" name="username" required>
            <button id="signupBtn">Se connecté</button>
        </div>

        <p id="message"></p>
    </section>
    <script src="script/users.js"></script>
    <script>
        const signupBtn = document.getElementById("signupBtn");
        const message = document.getElementById("message")

        signupBtn.addEventListener("click", () => {
            const email = document.getElementById("email").value;
            const password = document.getElementById("password").value;
            const username = document.getElementById("username").value;

            if (email && password) {
                const userExists = users.some(u => u.email === email);
                if (userExists) {
                    message.textContent = "Cet email est déjà utilisé !"
                    message.style.color = "red";
                } else {
                    addUser(email, password, username);
                    message.textContent = "Compte créé avec succès !";
                    message.style.color = "green";
                    console.log(users);
                }
            }
        });

        fetch("html_extention/navbar.html").then(response => response.text()).then(data => {document.getElementById('navbar').innerHTML = data}).catch(err => console.error('erreyr lors dy chargement de la navbar'))

    </script>
</body>
</html>